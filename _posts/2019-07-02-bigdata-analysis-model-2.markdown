---
layout: post
title:  "数据分析之路事件模型"
date:   2019-07-02 00:18:23 +0700
categories: [bigdata]
---

#### 概述
  在日常的数据分析中，常用的有8大模型：用户模型（点我回顾）、事件模型、漏斗分析模型、热图分析模型、自定义留存分析模型、粘性分析模型、全行为路径分析模型、用户分群模型，其中，“事件模型”对于很多业务人员来说相对比较陌生，但他却是用户行为数据分析的第一步，也是分析的核心和基础。  
  事件模型中的逻辑结构、事件的准确性、自定义能力和对事件的管理是“事件模型”的几大要素。对这一模型有了深刻的认识和理解，那用户行为数据的采集逻辑也就基本掌握。下文我们稍作展开。  
  
#### 什么是事件？  
  在日常工作中，不同岗位、不同角色所关注的事件各不相同，比如，市场人员可能关注点击进入落地页的人数以及进入落地页后用户是否点击核心按钮，比如“立即注册/立即购买”等？运营人员可能更关注某次邀请好友活动中老用户是否点击该活动页面，是否将邀请海报分享到朋友圈？PM可能更关心新功能上线后用户是否点击打开？在洞察诸如此类的指标过程中，事件模型就起到了至关重要的作用。  
  那么，什么叫做“事件”呢？简单讲，就是用户在产品上的行为，它是用户行为的一个专业描述，用户在产品上的所有获得的程序反馈都可以抽象为事件，由开发人员通过埋点进行采集，通俗讲就是：将一段代码放入对应的页面/按钮，用户进入页面/点击按钮的本质是在加载背后的代码，同时再加载事件采集代码，这样就被SDK所记录下来了。  
  
#### 事件的采集  
  其实，要说明白事件模型这个事，就像我们写作文，记叙文的六要素：时间、地点、人物，起因、经过、结果，也就是：谁，在什么时间，在哪儿做了一件什么事儿，相应的，数据分析就像是通过数据/指标来讲述用户与产品之间的故事，我们举个例子来说明。  
  
   ![collect_model_2_1](/static/img/post/b_a_m_2_1.jpeg){:height="320" width="720"}  
   
   如上图所示：当用户点击进入苹果7 plus手机的商品详情页时，用户可能发起的行为有：点击选择了颜色：黑色，选择了版本128G，选择了购买方式：联通优惠购，选择了优惠类型：买手机省话费，这一系列行为都需要分别采集下来，如果该电商经营的数码产品品类达上千SKU，相应的就有上千个商品详情页，那么，如果每一页都按照上文中的埋点采集方式来操作，那无疑是一项庞大的工作，该如何让事件采集更高效、更有可操作性呢？  
   为了最大化还原用户使用场景，我们引入3个概念：事件-属性-值：  
   事件：用户在产品上的行为  
   属性：描述事件的维度  
   值：属性的内容  
   之所以引入这一组概念，是因为灵活运用事件-属性-值的结构，将极大地节省事件量，提高工作效率，使后续的数据洞察和交叉分析更精准。  
   继续以某电商JS产品（上图）为例，事件记录了用户的行为，我们可以知道用户A几点几分进入了商品详情页，但很多分析场景下我们更需要知道用户进入的是哪个商品页以及其他业务属性，通过属性可以采集当前页面的商品名称、商品ID、商品类型等。  
   
   ![collect_model_2_2](/static/img/post/b_a_m_2_2.jpeg){:height="320" width="720"}    
   
   将数据采集需求交由开发人员，进行埋点，将下文这段代码放入对应的页面。  
```aidl
    zhuge.track('进入商品详情页', {
    '商品名称' : '【联通赠费版】Apple iPhone 7 Plus 128G 黑色 移动联通电信4G手机',
    '商品价格' : 6588.00,
    '商品一级分类' : 手机,
    '商品品牌' : 'Apple'});   
```
  PS：属性名称不能超过255个字符，属性值不能超过200个字符  
  再聊聊采集时机，通常有3种采集时机，包括：用户点击（click）、网页加载完成、服务器判断返回。在设计埋点需求文档时，采集时机的说明尤为重要，也是保证数据准确性的核心。  
  举个例子，在采集过程中如果没有明确时机，当用户点击了注册按钮，由于用户输入了错误的注册信息实际没有注册成功，可能仍然会进行记录，这样在统计注册成功事件的时候就不是准确的。而正确的采集时机描述应该是“服务器返回注册成功的判断”。  
  当然，同一用户行为或动机，可以基于采集需求进行多次标记，比如注册按钮，既采集用户的click行为（用户点击注册就表明有注册动机），也可以采集注册结果。事件设计为“用户点击立即注册”“注册成功”，采集时机对应“click”和“服务器返回注册成功的判断”。  
  
#### 事件的分析  
  当我们对事件代码采集后，他只是一个基于时间序列的记录（用户A，几点几分，在什么样的网络环境设备环境下发生了什么行为），想要指导业务增长，需要构建一些分析模型。对事件的分析通常有事件触发人数、次数、人均次数、活跃比四个维度的计算。  
```aidl
人数：某一事件（行为）有多少人触发了
次数：某一事件（行为）触发了多少次
人均次数：某一事件（行为）平均触发多少次
活跃比：在一个时间区间内，触发某一事件的人数占当前时间段内所有活跃人数的比
```

  事件以及“事件-属性-值”的结构，让我们在日常的业务分析中，可以更直接快速的掌握数据波动趋势。  
  1、人数：触发某一事件的用户数  
  
   ![collect_model_2_3](/static/img/post/b_a_m_2_3.jpeg){:height="320" width="720"}    
   
   如上图所示，最近7天，通过“查看课程详情-搜索课程-在线试听”的人数分别为1764人、1049人、609人。  
   
   2、次数：某一事件被用户触发的次数  
   
   ![collect_model_2_4](/static/img/post/b_a_m_2_4.jpeg){:height="320" width="720"}   
   
   通过对用户群、事件属性的筛选和对比，我们发现，与来自搜狗的用户相比，来自百度的用户更喜欢使用微信支付。  
   
   3、人均次数：触发某一事件的次数/人数  
   
   ![collect_model_2_5](/static/img/post/b_a_m_2_5.jpeg){:height="320" width="720"}   
   
   比值指标，更科学的描述事件。  
   
   4、活跃比  
   在用户行为数据分析的过程中，活跃比是常用指标，活跃比=触发事件的人数/活跃人数，即，触发某一事件的人数占当时活跃人数的比率。  
   举个例子，某电商产品在近7天，活跃人数有1000人，触发过「查看商品详情」的有300人，那么在最近7天内，「查看商品详情」事件的活跃比是30%。  
  
   ![collect_model_2_6](/static/img/post/b_a_m_2_6.jpeg){:height="320" width="720"}   
   
#### 事件的管理  
   企业无论是自建用户行为数据分析平台还是采购第三方，对事件的管理都是产品、运营等业务人员工作流中非常重要的一环。当采集和分析数量非常多（可能会多达几百上千）的用户行为事件时，事件查找和组织就变得不够方便。   
   
   ![collect_model_2_7](/static/img/post/b_a_m_2_7.jpeg){:height="320" width="720"}     
   
   因此，事件的分组和重要事件（星标事件）的标注就显得尤为重要，当事件很多时，可以对事件进行分门别类地管理。同时，可以从产品业务角度将重要的用户行为标注出来，以便可以在分析时方便、快捷地查找常用、重要的事件。  
   数据驱动增长，从科学的构建事件模型开始，以事件-属性-值为逻辑的事件模型，极大地提高采集效率，更真实且全面的还原用户与产品的交互过程，通过研究与事件发生关联的所有因素来挖掘用户行为事件背后的原因，快速定位影响转化的关键点，提高运营效率。此外，事件模型也是漏斗模型、自定义留存模型、全行为路径分析模型的基础.   
   
   
   
   
  
   
  


       
  
